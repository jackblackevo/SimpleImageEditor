!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/js/",t(t.s=6)}([function(e,t,i){"use strict";function n(){var e=new a.a(document),t=new r.a(e),i=new o.a(t,e);e.chooseFileInput.addEventListener("change",function(e){var t=e.target.files;if(t.length>0){var n=t[0];i.readSelectFile(n)}}),e.resizeImgPercentRange.addEventListener("input",function(e){var t=e.target.value;i.updateResizeImgPercent(t)}),e.qualityPercentRange.addEventListener("input",function(e){var t=e.target.value;i.updateCompressionImgPercent(t)}),e.outputFileBtn.addEventListener("click",function(){i.getImgFile()}),e.cropBtn.addEventListener("click",function(){i.cropImg()}),e.resetBtn.addEventListener("click",function(){i.resetCrop()}),e.cancelBtn.addEventListener("click",function(){i.closeCrop()}),e.isGrayscaleCheckBox.addEventListener("change",function(e){var t=e.target.checked;i.updateGrayscaleFlag(t)}),e.isResizeImgLockCheckBox.addEventListener("click",function(e){var t=e.target.checked;i.updateResizeImgLockFlag(t)})}Object.defineProperty(t,"__esModule",{value:!0});var a=i(4),r=i(3),o=i(2);window.addEventListener("DOMContentLoaded",n)},function(e,t,i){var n,a;/*!
 * Exif v0.1.1
 * https://github.com/fengyuanchen/exif
 *
 * Copyright (c) 2016 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2016-04-16T08:19:39.302Z
 */
!function(t,i){"object"==typeof e&&"object"==typeof e.exports?e.exports=i(t,!0):i(t)}("undefined"!=typeof window?window:this,function(i,r){"use strict";function o(e){return T.call(e).slice(8,-1).toLowerCase()}function s(e){return"string"==typeof e}function h(e){return"number"==typeof e&&!isNaN(e)}function l(e){return"object"==typeof e&&null!==e}function c(e){var t,i;if(!l(e))return!1;try{return t=e.constructor,i=t.prototype,t&&i&&D.call(i,"isPrototypeOf")}catch(e){return!1}}function d(e){return"function"===o(e)}function u(e){return Array.isArray?Array.isArray(e):"array"===o(e)}function p(e,t){var i=[];return t=t>=0?t:0,Array.from?Array.from(e).slice(t):i.slice.call(e,t)}function g(e,t){var i=-1;return f(t,function(t,n){if(t===e)return i=n,!1}),i}function f(e,t){var i,n;if(e&&d(t))if(u(e)||h(e.length))for(n=0,i=e.length;n<i&&!1!==t.call(e,e[n],n,e);n++);else if(l(e))for(n in e)if(e.hasOwnProperty(n)&&!1===t.call(e,e[n],n,e))break;return e}function m(e){var t;if(arguments.length>1){if(t=p(arguments),Object.assign)return Object.assign.apply(Object,t);t.shift(),f(t,function(t){f(t,function(t,i){e[i]=t})})}return e}function v(e,t,i){var n="",a=t;for(i+=t;a<i;a++)n+=String.fromCharCode(e.getUint8(a));return n}function y(e){var t,i=e.replace(C,""),n=atob(i),a=n.length,r=new b(a),o=new Uint8Array(r);for(t=0;t<a;t++)o[t]=n.charCodeAt(t);return r}function w(e,t){this.image=e,this.options=m({},w.DEFAULTS,c(t)&&t),this.tiffTags=null,this.exifTags=null,this.gpsTags=null,this.interoperabilityTags=null,this.init()}var b=i.ArrayBuffer,x=/^data\:/,C=/^data\:([^\;]+)\;base64,/,S=/^data\:image\/jpeg.*;base64,/,I=Object.prototype,T=I.toString,D=I.hasOwnProperty;w.prototype={constructor:w,init:function(){var e,t,i=this,n=this.image;if(n&&b)if(n instanceof Blob)e=new FileReader,e.onerror=e.onabort=function(){i.readEnd("Fails to read image as ArrayBuffer")},e.onload=function(){i.read(this.result)},e.readAsArrayBuffer(n);else if(n instanceof HTMLImageElement&&(n=n.src),s(n)){if(x.test(n))return S.test(n)?this.read(y(n)):this.readEnd();t=new XMLHttpRequest,t.onerror=t.onabort=function(){i.readEnd("Fails to load image as ArrayBuffer")},t.onload=function(){i.read(this.response)},t.open("get",n),t.responseType="arraybuffer",t.send()}},read:function(e){var t,i,n,a,r=this.options,o=new DataView(e),s=this.getSOIOffset(o),h=this.getAPP1Offset(o,s+2),l=h+4,c=h+10;"Exif"===v(o,l,4)?(n=o.getUint16(c),i=18761===n,i||19789===n?(this.littleEndian=i,42===o.getUint16(c+2,i)?(t=o.getUint32(c+4,i))<8&&(a="Not valid TIFF data (0th IFD offset less than 8)"):a="Not valid TIFF data (no 0x002A)"):a="Not valid TIFF data (no 0x4949 or 0x4D4D)"):a="Not valid Exif data (no Exif ID code)",a||(this.dataView=o,this.tiffOffset=c,this.tiffTags=this.readTags(t,w.TIFF_TAGS),(r.exif||r.interoperability)&&this.readExifTags(),r.gps&&this.readGPSTags(),r.interoperability&&this.readInteroperabilityTags(),this.dataView=null),this.readEnd(a)},getSOIOffset:function(e){for(var t=e.byteLength,i=0,n=0;i<t;){if(255===e.getUint8(i)&&216===e.getUint8(i+1)){n=i;break}i++}return n},getAPP1Offset:function(e,t){for(var i=e.byteLength,n=t;t<i;){if(255===e.getUint8(t)&&225===e.getUint8(t+1)){n=t;break}t++}return n},readTags:function(e,t){var i,n,a,r,o,s=this.options,l=s.ignored,c=this.dataView,d=this.tiffOffset+e,p=this.littleEndian,f=c.getUint16(d,p),m={};for(u(l)&&l.length||(l=!1),o=0;o<f;o++)if(r=d+12*o+2,i=t[c.getUint16(r,p)]){if(l&&g(i,l)>-1)continue;n=this.readTagValue(r,i),a=w.TAG_VALUE_OPTIONS[i],a&&h(n)&&(n=a[n]),m[i]=n}return m},readTagValue:function(e,t){var i,n,a,r,o,s=this.dataView,h=this.littleEndian,l=e+2,c=e+4,d=e+8,u=s.getUint16(l,h),p=s.getUint32(c,h),f=this.tiffOffset+s.getUint32(d,h);switch(u){case 1:case 7:if(1===p)r=s.getUint8(d,h);else if(a=p>4?f:d,g(t,["ExifVersion","FlashpixVersion"])>-1)r=v(s,a,p);else for(r=[],o=0;o<p;o++)r[o]=s.getUint8(a+o);break;case 2:a=p>4?f:d,r=v(s,a,p-1);break;case 3:if(1===p)r=s.getUint16(d,h);else for(a=p>2?f:d,r=[],o=0;o<p;o++)r[o]=s.getUint16(a+2*o,h);break;case 4:if(1===p)r=s.getUint32(d,h);else for(r=[],o=0;o<p;o++)r[o]=s.getUint32(f+4*o,h);break;case 5:if(1===p)n=s.getUint32(f,h),i=s.getUint32(f+4,h),r=n/i;else for(r=[],o=0;o<p;o++)n=s.getUint32(f+8*o,h),i=s.getUint32(f+4+8*o,h),r[o]=n/i;break;case 9:if(1===p)r=s.getInt32(d,h);else for(r=[],o=0;o<p;o++)r[o]=s.getInt32(f+4*o,h);break;case 10:if(1===p)n=s.getInt32(f,h),i=s.getInt32(f+4,h),r=n/i;else for(r=[],o=0;o<p;o++)n=s.getInt32(f+8*o,h),i=s.getInt32(f+4+8*o,h),r[o]=n/i}return r},readExifTags:function(){var e=this.tiffTags,t=e&&e.ExifIFDPointer;t&&(this.exifTags=this.readTags(t,w.EXIF_TAGS))},readGPSTags:function(){var e=this.tiffTags,t=e&&e.GPSInfoIFDPointer;t&&(this.gpsTags=this.readTags(t,w.GPS_TAGS))},readInteroperabilityTags:function(){var e=this.exifTags,t=e&&e.InteroperabilityIFDPointer;t&&(this.interoperabilityTags=this.readTags(t,w.INTEROPERABILITY_TAGS))},readEnd:function(e){var t=this.options;e?d(t.fail)&&t.fail.call(this,e):d(t.done)&&t.done.call(this,this.getTags())},getTags:function(){var e=this.options;return m({},this.tiffTags,e.exif&&this.exifTags,e.gps&&this.gpsTags,e.interoperability&&this.interoperabilityTags)}},w.DEFAULTS={exif:!0,gps:!0,interoperability:!0,ignored:["MakerNote","UserComment"],done:null,fail:null},w.TIFF_TAGS={256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},w.EXIF_TAGS={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",40962:"PixelXDimension",40963:"PixelYDimension",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",40965:"InteroperabilityIFDPointer"},w.GPS_TAGS={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},w.INTEROPERABILITY_TAGS={1:"InteroperabilityIndex"},w.TAG_VALUE_OPTIONS={Compression:{1:"Uncompressed",6:"JPEG compression"},PhotometricInterpretation:{1:"RGB",6:"YCbCr"},PlanarConfiguration:{1:"Chunky format",2:"Planar format"},YCbCrPositioning:{1:"Centered",2:"Co-sited"},ResolutionUnit:{1:"Inches",2:"Centimeters"},ColorSpace:{1:"sRGB",65535:"Uncalibrated"},ComponentsConfiguration:{0:"Does not exist",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program (based toward depth of field)",6:"Action program (based toward fast shutter speed)",7:"Portrait mode (for closeup photos with the background out of focus)",8:"Landscape mode (for landscape photos with the background in focus)"},SensitivityType:{0:"Unknown",1:"Standard output sensitivity (SOS)",2:"Recommended exposure index (REI)",3:"ISO speed",4:"Standard output sensitivity (SOS) and recommended exposure index (REI)",5:"Standard output sensitivity (SOS) and ISO speed",6:"Recommended exposure index (REI) and ISO speed",7:"Standard output sensitivity (SOS) and recommended exposure index (REI) and ISO speed"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5500K)",14:"Cool white fluorescent (W 3800 - 4500K)",15:"White fluorescent (WW 3250 - 3800K)",16:"Warm white fluorescent (WW 2600 - 3250K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other light source"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},FileSource:{0:"Others",1:"Scanner of transparent type",2:"Scanner of reflex type",3:"DSC"},SceneType:{1:"A directly photographed image"},CustomRendered:{0:"Normal process",1:"Custom process"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"}};var M=i.Exif;return w.noConflict=function(){return i.Exif=M,w},n=[],void 0!==(a=function(){return w}.apply(t,n))&&(e.exports=a),void 0===r&&(i.Exif=w),w})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=Symbol(),o=Symbol(),s=function(){function e(t,i){n(this,e),this[r]=t,this[o]=i}return a(e,[{key:"readSelectFile",value:function(e){this[r].readImg(this[o].imgPreviewArea,e,this[o].imageEditor)}},{key:"updateResizeImgPercent",value:function(e){var t=Number.parseInt(e);this[r].setResizePercentage(t)}},{key:"updateCompressionImgPercent",value:function(e){var t=Number.parseInt(e);this[r].setQualityRate(t)}},{key:"updateGrayscaleFlag",value:function(e){this[r].setIsGrayscale(e)}},{key:"updateResizeImgLockFlag",value:function(e){this[r].setIsResizeImgLock(e)}},{key:"getImgFile",value:function(){this[r].downloadImg()}},{key:"cropImg",value:function(){this[r].setEditedImgSrcToImg()}},{key:"resetCrop",value:function(){this[r].resetCropper()}},{key:"closeCrop",value:function(){this[r].closeCropper()}}]),e}();t.a=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=i(1),r=i.n(a),o=i(5),s=i.n(o),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=Symbol(),c=Symbol(),d=Symbol(),u=Symbol(),p=Symbol(),g=Symbol(),f=Symbol(),m=Symbol(),v=Symbol(),y=Symbol(),w=Symbol(),b=Symbol(),x=Symbol(),C=Symbol(),S=Symbol(),I=Symbol(),T=Symbol(),D=Symbol(),M=Symbol(),k=Symbol(),E=Symbol(),P=Symbol(),B=Symbol(),L=Symbol(),R=Symbol(),O=Symbol(),F=function(){function e(t){n(this,e),this[l]=t,this[c]=null,this[d]=null,this[u]="",this[p]=0,this[g]="",this[f]=0,this[m]=0,this[v]=0,this[y]=0,this[w]=1600,this[b]=1200,this[x]=60,this[C]=.93,this[S]=!1,this[I]=!1,this[T]=null,this[O]=null}return h(e,[{key:D,value:function(e){var t=void 0,i=void 0;t=e.getImageData(0,0,this[v],this[y]),i=t.data;for(var n=0;n<i.length;n+=4){var a=.34*i[n]+.5*i[n+1]+.16*i[n+2];i[n]=a,i[n+1]=a,i[n+2]=a}e.putImageData(t,0,0)}},{key:M,value:function(){this[l].hideImgEditor(),null!==this[T]&&(console.log("editor close..."),this[T].destroy())}},{key:k,value:function(){console.log("editor init..."),null!==this[O]?this[c].removeEventListener("click",this[O]):this[O]=this[E](),this[c].addEventListener("click",this[O])}},{key:E,value:function(){var e=this;return function(t){console.log("editor open..."),e[l].displayImgEditor(),e[P]()}}},{key:P,value:function(){this[T]=new s.a(this[d],{movable:!1,rotatable:!1,scalable:!1})}},{key:B,value:function(e){var t=e.type;return/^image\/(jpe?g|png)$/i.test(t)}},{key:L,value:function(){if(this[I]){var e=void 0,t=void 0,i=void 0,n=void 0,a=void 0,r=void 0;this[f]>this[m]?(e=this[f],t=this[m],i="width"):(e=this[m],t=this[f],i="height");for(var o=!0;;){if(n=e>this[w],a=t>this[b],!n&&!a){this[l].disableResizeImgPercentRange(!0);break}(o&&this[l].disableResizeImgPercentRange(!0),n)?(r=1-(e-this[w])/e,e=this[w],Math.round(t*=r),o=!1):a?(r=1-(t-this[b])/t,t=this[b],Math.round(e*=r),o=!1):o=!1}"width"===i?(this[v]=e,this[y]=t):(this[v]=t,this[y]=e),this[x]=Math.round((this[v]/this[f]+this[y]/this[m])/2*100),this[l].refreshResizePercentageWidthHeight(this[x],this[v],this[y]),this[l].refreshResizeImgPercentRangeVal(this[x])}else this[v]=Math.round(this[f]*this[x]/100),this[y]=Math.round(this[m]*this[x]/100),this[l].refreshResizePercentageWidthHeight(this[x],this[v],this[y]),this[l].disableResizeImgPercentRange(!1)}},{key:R,value:function(e,t,i){return new Promise(function(n,a){var r=new Image;r.addEventListener("load",function(){var e=r.naturalWidth,a=r.naturalHeight,o=document.createElement("canvas"),s=o.getContext("2d");switch([5,6,7,8].indexOf(t)>-1?(o.width=a,o.height=e):(o.width=e,o.height=a),t){case 2:s.transform(-1,0,0,1,e,0);break;case 3:s.transform(-1,0,0,-1,e,a);break;case 4:s.transform(1,0,0,-1,0,a);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,a,0);break;case 7:s.transform(0,-1,-1,0,a,e);break;case 8:s.transform(0,-1,1,0,0,e);break;default:s.transform(1,0,0,1,0,0)}s.drawImage(r,0,0),n(o.toDataURL(i))}),r.src=e})}},{key:"readImg",value:function(e,t,i){var n=this;if(!this[B](t))return void alert("Invalid image type.");new Promise(function(e,i){var n=new FileReader;n.addEventListener("load",function(t){e(t.target.result)}),n.readAsDataURL(t)}).then(function(e){return new Promise(function(t,i){new r.a(e,{exif:!0,done:function(e){t(e.Orientation)},fail:function(e){i(e)}})}).then(function(i){return n[R](e,i,t.type)}).catch(function(t){return console.log(t),Promise.resolve(e)})}).then(function(t){return new Promise(function(i,a){n[c]=e,n[c].addEventListener("load",function e(t){i(),t.target.removeEventListener("load",e)}),n[c].src=t})}).then(function(){n[g]=t.name,n[u]=t.type,n[p]=t.size,n[f]=n[c].naturalWidth,n[m]=n[c].naturalHeight,n[L]();var e=n;return n[l].displayImgFileDetail({imgFileName:e[g],imgMIMEType:e[u],imgFileSizeKB:e[p]/1024,imgWidth:e[f],imgHeight:e[m],croppedImgWidth:e[f],croppedImgHeight:e[m],imgOutputWidth:e[v],imgOutputHeight:e[y]}),new Promise(function(e,t){n[d]=i,n[d].addEventListener("load",function t(i){e(),i.target.removeEventListener("load",t)}),n[d].src=n[c].src})}).then(function(){n.closeCropper()})}},{key:"downloadImg",value:function(){var e=void 0,t=document.createElement("a"),i=document.createElement("canvas"),n=i.getContext("2d"),a=this[c].cloneNode();a.width=this[v],a.height=this[y],i.width=a.width,i.height=a.height,n.clearRect(0,0,i.width,i.height),n.drawImage(this[c],0,0,a.width,a.height),this[S]&&this[D](n),e=i.toDataURL(this[u],this[C]),t.href=e,t.download="edited_"+this[g],t.click()}},{key:"setEditedImgSrcToImg",value:function(){var e=this;new Promise(function(t,i){var n=e[T].getCroppedCanvas();e[c].addEventListener("load",function e(i){t(),i.target.removeEventListener("load",e)}),e[c].src=n.toDataURL(e[u])}).then(function(){return e[f]=e[c].naturalWidth,e[m]=e[c].naturalHeight,e[v]=Math.round(e[f]*e[x]/100),e[y]=Math.round(e[m]*e[x]/100),e[l].refreshCroppedImgResolution(e[f],e[m]),e[l].refreshResizePercentageWidthHeight(e[x],e[v],e[y]),new Promise(function(t,i){e[d].addEventListener("load",function e(i){t(),i.target.removeEventListener("load",e)}),e[d].src=e[c].src})}).then(function(){e.closeCropper()})}},{key:"resetCropper",value:function(){this[T].reset()}},{key:"closeCropper",value:function(){this[M](),this[k]()}},{key:"setResizePercentage",value:function(e){this[x]=e,this[L]()}},{key:"setQualityRate",value:function(e){this[C]=e/100,this[l].refreshQualityPercentage(Math.round(100*this[C]))}},{key:"setIsGrayscale",value:function(e){this[S]=e}},{key:"setIsResizeImgLock",value:function(e){this[I]=e,this[L]()}}]),e}();t.a=F},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){n(this,e),this.chooseFileInput=t.getElementById("chooseFileInput"),this.fileNameTxt=t.getElementById("fileNameTxt"),this.fileTypeTxt=t.getElementById("fileTypeTxt"),this.originalImgSizeTxt=t.getElementById("originalImgSizeTxt"),this.originalImgWidthTxt=t.getElementById("originalImgWidthTxt"),this.originalImgHeightTxt=t.getElementById("originalImgHeightTxt"),this.croppedImgWidthTxt=t.getElementById("croppedImgWidthTxt"),this.croppedImgHeightTxt=t.getElementById("croppedImgHeightTxt"),this.outputImgWidthTxt=t.getElementById("outputImgWidthTxt"),this.outputImgHeightTxt=t.getElementById("outputImgHeightTxt"),this.resizeImgPercentRange=t.getElementById("resizeImgPercentRange"),this.resizeValTxt=t.getElementById("resizeValTxt"),this.isResizeImgLockCheckBox=t.getElementById("isResizeImgLockCheckBox"),this.qualityPercentRange=t.getElementById("qualityPercentRange"),this.qualityValTxt=t.getElementById("qualityValTxt"),this.outputFileBtn=t.getElementById("outputFileBtn"),this.imgPreviewArea=t.getElementById("imgPreviewArea"),this.formArea=t.getElementById("formArea"),this.imageEditor=t.getElementById("imageEditor"),this.imgContainer=t.getElementById("imgContainer"),this.cropBtn=t.getElementById("cropBtn"),this.resetBtn=t.getElementById("resetBtn"),this.cancelBtn=t.getElementById("cancelBtn"),this.isGrayscaleCheckBox=t.getElementById("isGrayscaleCheckBox")}return a(e,[{key:"displayImgFileDetail",value:function(e){this.fileNameTxt.textContent=e.imgFileName,this.fileTypeTxt.textContent=e.imgMIMEType,this.originalImgSizeTxt.textContent=e.imgFileSizeKB,this.originalImgWidthTxt.textContent=e.imgWidth,this.originalImgHeightTxt.textContent=e.imgHeight,this.croppedImgWidthTxt.textContent=e.croppedImgWidth,this.croppedImgHeightTxt.textContent=e.croppedImgHeight,this.outputImgWidthTxt.textContent=e.imgOutputWidth,this.outputImgHeightTxt.textContent=e.imgOutputHeight,this.resizeImgPercentRange.disabled=!1,this.qualityPercentRange.disabled=!1,this.isGrayscaleCheckBox.disabled=!1,this.isResizeImgLockCheckBox.disabled=!1,this.outputFileBtn.disabled=!1}},{key:"refreshCroppedImgResolution",value:function(e,t){this.croppedImgWidthTxt.textContent=e,this.croppedImgHeightTxt.textContent=t}},{key:"displayImgEditor",value:function(){this.formArea.style.display="none",this.imgContainer.style.display="block"}},{key:"hideImgEditor",value:function(){formArea.style.display="block",imgContainer.style.display="none"}},{key:"refreshResizePercentageWidthHeight",value:function(e,t,i){this.resizeValTxt.textContent=e,this.outputImgWidthTxt.textContent=t,this.outputImgHeightTxt.textContent=i}},{key:"refreshResizeImgPercentRangeVal",value:function(e){this.resizeImgPercentRange.value=e}},{key:"refreshQualityPercentage",value:function(e){this.qualityValTxt.textContent=e}},{key:"disableResizeImgPercentRange",value:function(e){this.resizeImgPercentRange.disabled=!!e}}]),e}();t.a=r},function(e,t,i){/*!
 * Cropper.js v1.0.0-rc
 * https://github.com/fengyuanchen/cropperjs
 *
 * Copyright (c) 2017 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2017-03-25T12:02:21.062Z
 */
!function(t,i){e.exports=i()}(0,function(){"use strict";function e(e){return re.call(e).slice(8,-1).toLowerCase()}function t(e){return"number"==typeof e&&!isNaN(e)}function i(e){return void 0===e}function n(e){return"object"===(void 0===e?"undefined":j(e))&&null!==e}function a(e){if(!n(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&oe.call(i,"isPrototypeOf")}catch(e){return!1}}function r(t){return"function"===e(t)}function o(t){return Array.isArray?Array.isArray(t):"array"===e(t)}function s(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(ee,"$1")),e}function h(e,i){if(e&&r(i)){var a=void 0;if(o(e)||t(e.length)){var s=e.length;for(a=0;a<s&&!1!==i.call(e,e[a],a,e);a++);}else n(e)&&Object.keys(e).forEach(function(t){i.call(e,e[t],t,e)})}return e}function l(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if(n(e)&&i.length>0){if(Object.assign)return Object.assign.apply(Object,[e].concat(i));i.forEach(function(t){n(t)&&Object.keys(t).forEach(function(i){e[i]=t[i]})})}return e}function c(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),a=2;a<i;a++)n[a-2]=arguments[a];return function(){for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return e.apply(t,n.concat(a))}}function d(e,i){var n=e.style;h(i,function(e,i){J.test(i)&&t(e)&&(e+="px"),n[i]=e})}function u(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function p(e,i){if(i){if(t(e.length))return void h(e,function(e){p(e,i)});if(e.classList)return void e.classList.add(i);var n=s(e.className);n?n.indexOf(i)<0&&(e.className=n+" "+i):e.className=i}}function g(e,i){if(i)return t(e.length)?void h(e,function(e){g(e,i)}):e.classList?void e.classList.remove(i):void(e.className.indexOf(i)>=0&&(e.className=e.className.replace(i,"")))}function f(e,i,n){if(i)return t(e.length)?void h(e,function(e){f(e,i,n)}):void(n?p(e,i):g(e,i))}function m(e){return e.replace($,"$1-$2").toLowerCase()}function v(e,t){return n(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+m(t))}function y(e,t,i){n(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-"+m(t),i)}function w(e,t){if(n(e[t]))delete e[t];else if(e.dataset)try{delete e.dataset[t]}catch(i){e.dataset[t]=null}else e.removeAttribute("data-"+m(t))}function b(e,t,i){var n=s(t).split(Z);if(n.length>1)return void h(n,function(t){b(e,t,i)});e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i)}function x(e,t,i,n){var a=s(t).split(Z),r=i;if(a.length>1)return void h(a,function(t){x(e,t,i)});n&&(i=function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return b(e,t,i),r.apply(e,a)}),e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)}function C(e,t,n){if(e.dispatchEvent){var a=void 0;return r(Event)&&r(CustomEvent)?a=i(n)?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):i(n)?(a=document.createEvent("Event"),a.initEvent(t,!0,!0)):(a=document.createEvent("CustomEvent"),a.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(a)}return!e.fireEvent||e.fireEvent("on"+t)}function S(e){var i=e||window.event;if(i.target||(i.target=i.srcElement||document),!t(i.pageX)&&t(i.clientX)){var n=e.target.ownerDocument||document,a=n.documentElement,r=n.body;i.pageX=i.clientX+((a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0)),i.pageY=i.clientY+((a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0))}return i}function I(e){var t=document.documentElement,i=e.getBoundingClientRect();return{left:i.left+((window.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0)),top:i.top+((window.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0))}}function T(e,t){return e.getElementsByTagName(t)}function D(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function M(e){return document.createElement(e)}function k(e,t){e.appendChild(t)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function P(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function B(e){var t=e.match(Q);return t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function L(e){var t="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+t}function R(e,t){if(e.naturalWidth&&!ne)return void t(e.naturalWidth,e.naturalHeight);var i=M("img");i.onload=function(){t(this.width,this.height)},i.src=e.src}function O(e){var i=[],n=e.translateX,a=e.translateY,r=e.rotate,o=e.scaleX,s=e.scaleY;t(n)&&0!==n&&i.push("translateX("+n+"px)"),t(a)&&0!==a&&i.push("translateY("+a+"px)"),t(r)&&0!==r&&i.push("rotate("+r+"deg)"),t(o)&&1!==o&&i.push("scaleX("+o+")"),t(s)&&1!==s&&i.push("scaleY("+s+")");var h=i.length?i.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function F(e,t){var i=Math.abs(e.degree)%180,n=(i>90?180-i:i)*Math.PI/180,a=Math.sin(n),r=Math.cos(n),o=e.width,s=e.height,h=e.aspectRatio,l=void 0,c=void 0;return t?(l=o/(r+a/h),c=l/h):(l=o*r+s*a,c=o*a+s*r),{width:l,height:c}}function A(e,i){var n=M("canvas"),a=n.getContext("2d"),r=0,o=0,s=i.naturalWidth,h=i.naturalHeight,l=i.rotate,c=i.scaleX,d=i.scaleY,u=t(c)&&t(d)&&(1!==c||1!==d),p=t(l)&&0!==l,g=p||u,f=s*Math.abs(c||1),m=h*Math.abs(d||1),v=void 0,y=void 0,w=void 0;return u&&(v=f/2,y=m/2),p&&(w=F({width:f,height:m,degree:l}),f=w.width,m=w.height,v=f/2,y=m/2),n.width=f,n.height=m,g&&(r=-s/2,o=-h/2,a.save(),a.translate(v,y)),p&&a.rotate(l*Math.PI/180),u&&a.scale(c,d),a.drawImage(e,Math.floor(r),Math.floor(o),Math.floor(s),Math.floor(h)),g&&a.restore(),n}function W(e,t,i){var n="",a=t;for(i+=t;a<i;a++)n+=se(e.getUint8(a));return n}function N(e){var t=new DataView(e),i=t.byteLength,n=void 0,a=void 0,r=void 0,o=void 0,s=void 0,h=void 0,l=void 0,c=void 0,d=void 0,u=void 0;if(255===t.getUint8(0)&&216===t.getUint8(1))for(d=2;d<i;){if(255===t.getUint8(d)&&225===t.getUint8(d+1)){l=d;break}d++}if(l&&(a=l+4,r=l+10,"Exif"===W(t,a,4)&&(h=t.getUint16(r),((s=18761===h)||19789===h)&&42===t.getUint16(r+2,s)&&(o=t.getUint32(r+4,s))>=8&&(c=r+o))),c)for(i=t.getUint16(c,s),u=0;u<i;u++)if(d=c+12*u+2,274===t.getUint16(d,s)){d+=8,n=t.getUint16(d,s),ne&&t.setUint16(d,1,s);break}return n}function z(e){var t=e.replace(K,""),i=atob(t),n=i.length,a=new ArrayBuffer(n),r=new Uint8Array(a),o=void 0;for(o=0;o<n;o++)r[o]=i.charCodeAt(o);return a}function H(e){var t=new Uint8Array(e),i=t.length,n="",a=void 0;for(a=0;a<i;a++)n+=se(t[a]);return"data:image/jpeg;base64,"+btoa(n)}function G(e,t){var i=e.pageX,n=e.pageY,a={endX:i,endY:n};return t?a:l({startX:i,startY:n},a)}function U(e){var t=l({},e),i=[];return h(e,function(e,n){delete t[n],h(t,function(t){var n=Math.abs(e.startX-t.startX),a=Math.abs(e.startY-t.startY),r=Math.abs(e.endX-t.endX),o=Math.abs(e.endY-t.endY),s=Math.sqrt(n*n+a*a),h=Math.sqrt(r*r+o*o),l=(h-s)/s;i.push(l)})}),i.sort(function(e,t){return Math.abs(e)<Math.abs(t)}),i[0]}function Y(e){var t=0,i=0,n=0;return h(e,function(e){var a=e.startX,r=e.startY;t+=a,i+=r,n+=1}),t/=n,i/=n,{pageX:t,pageY:i}}var X={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},q=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)},K=/^data:.*,/,$=/([a-z\d])([A-Z])/g,Q=/^(https?:)\/\/([^:\/?#]+):?(\d*)/i,Z=/\s+/,J=/^(width|height|left|top|marginLeft|marginTop)$/,ee=/^\s+(.*)\s+$/,te=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,ie="undefined"!=typeof window?window.navigator:null,ne=ie&&te.test(ie.userAgent),ae=Object.prototype,re=ae.toString,oe=ae.hasOwnProperty,se=(Array.prototype.slice,String.fromCharCode),he={render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e=this,t=e.options,i=e.element,n=e.container,a=e.cropper,r="cropper-hidden",o=void 0;p(a,r),g(i,r),e.containerData=o={width:Math.max(n.offsetWidth,Number(t.minContainerWidth)||200),height:Math.max(n.offsetHeight,Number(t.minContainerHeight)||100)},d(a,{width:o.width,height:o.height}),p(i,r),g(a,r)},initCanvas:function(){var e=this,t=e.options.viewMode,i=e.containerData,n=e.imageData,a=90===Math.abs(n.rotate),r=a?n.naturalHeight:n.naturalWidth,o=a?n.naturalWidth:n.naturalHeight,s=r/o,h=i.width,c=i.height;i.height*s>i.width?3===t?h=i.height*s:c=i.width/s:3===t?c=i.width/s:h=i.height*s;var d={naturalWidth:r,naturalHeight:o,aspectRatio:s,width:h,height:c};d.oldLeft=d.left=(i.width-h)/2,d.oldTop=d.top=(i.height-c)/2,e.canvasData=d,e.limited=1===t||2===t,e.limitCanvas(!0,!0),e.initialImageData=l({},n),e.initialCanvasData=l({},d)},limitCanvas:function(e,t){var i=this,n=i.options,a=n.viewMode,r=i.containerData,o=i.canvasData,s=o.aspectRatio,h=i.cropBoxData,l=i.cropped&&h;if(e){var c=Number(n.minCanvasWidth)||0,d=Number(n.minCanvasHeight)||0;a>1?(c=Math.max(c,r.width),d=Math.max(d,r.height),3===a&&(d*s>c?c=d*s:d=c/s)):a>0&&(c?c=Math.max(c,l?h.width:0):d?d=Math.max(d,l?h.height:0):l&&(c=h.width,d=h.height,d*s>c?c=d*s:d=c/s)),c&&d?d*s>c?d=c/s:c=d*s:c?d=c/s:d&&(c=d*s),o.minWidth=c,o.minHeight=d,o.maxWidth=1/0,o.maxHeight=1/0}if(t)if(a){var u=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,u),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,u),o.maxTop=Math.max(0,p),l&&i.limited&&(o.minLeft=Math.min(h.left,h.left+(h.width-o.width)),o.minTop=Math.min(h.top,h.top+(h.height-o.height)),o.maxLeft=h.left,o.maxTop=h.top,2===a&&(o.width>=r.width&&(o.minLeft=Math.min(0,u),o.maxLeft=Math.max(0,u)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e){var t=this,i=t.canvasData,n=t.imageData,a=n.rotate;if(t.rotated){t.rotated=!1;var r=F({width:n.width,height:n.height,degree:a}),o=r.width/r.height,s=1===n.aspectRatio;if(s||o!==i.aspectRatio){if(i.left-=(r.width-i.width)/2,i.top-=(r.height-i.height)/2,i.width=r.width,i.height=r.height,i.aspectRatio=o,i.naturalWidth=n.naturalWidth,i.naturalHeight=n.naturalHeight,s&&a%90||a%180){var h=F({width:n.naturalWidth,height:n.naturalHeight,degree:a});i.naturalWidth=h.width,i.naturalHeight=h.height}t.limitCanvas(!0,!1)}}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),t.limitCanvas(!1,!0),i.oldLeft=i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),d(t.canvas,l({width:i.width,height:i.height},O({translateX:i.left,translateY:i.top}))),t.renderImage(),t.cropped&&t.limited&&t.limitCropBox(!0,!0),e&&t.output()},renderImage:function(e){var t=this,i=t.canvasData,n=t.imageData,a=void 0,r=void 0,o=void 0,s=void 0;n.rotate&&(r=F({width:i.width,height:i.height,degree:n.rotate,aspectRatio:n.aspectRatio},!0),o=r.width,s=r.height,a={width:o,height:s,left:(i.width-o)/2,top:(i.height-s)/2}),l(n,a||{width:i.width,height:i.height,left:0,top:0}),d(t.image,l({width:n.width,height:n.height},O(l({translateX:n.left,translateY:n.top},n)))),e&&t.output()},initCropBox:function(){var e=this,t=e.options,i=t.aspectRatio,n=Number(t.autoCropArea)||.8,a=e.canvasData,r={width:a.width,height:a.height};i&&(a.height*i>a.width?r.height=r.width/i:r.width=r.height*i),e.cropBoxData=r,e.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*n),r.height=Math.max(r.minHeight,r.height*n),r.oldLeft=r.left=a.left+(a.width-r.width)/2,r.oldTop=r.top=a.top+(a.height-r.height)/2,e.initialCropBoxData=l({},r)},limitCropBox:function(e,t){var i=this,n=i.options,a=n.aspectRatio,r=i.containerData,o=i.canvasData,s=i.cropBoxData,h=i.limited;if(e){var l=Number(n.minCropBoxWidth)||0,c=Number(n.minCropBoxHeight)||0,d=Math.min(r.width,h?o.width:r.width),u=Math.min(r.height,h?o.height:r.height);l=Math.min(l,r.width),c=Math.min(c,r.height),a&&(l&&c?c*a>l?c=l/a:l=c*a:l?c=l/a:c&&(l=c*a),u*a>d?u=d/a:d=u*a),s.minWidth=Math.min(l,d),s.minHeight=Math.min(c,u),s.maxWidth=d,s.maxHeight=u}t&&(h?(s.minLeft=Math.max(0,o.left),s.minTop=Math.max(0,o.top),s.maxLeft=Math.min(r.width,o.left+o.width)-s.width,s.maxTop=Math.min(r.height,o.top+o.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=r.width-s.width,s.maxTop=r.height-s.height))},renderCropBox:function(){var e=this,t=e.options,i=e.containerData,n=e.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),e.limitCropBox(!1,!0),n.oldLeft=n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),t.movable&&t.cropBoxMovable&&y(e.face,"action",n.width===i.width&&n.height===i.height?"move":"all"),d(e.cropBox,l({width:n.width,height:n.height},O({translateX:n.left,translateY:n.top}))),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this;e.preview(),e.complete&&C(e.element,"crop",e.getData())}},le={initPreview:function(){var e=this,t=e.options.preview,i=M("img"),n=e.crossOrigin,a=n?e.crossOriginUrl:e.url;if(n&&(i.crossOrigin=n),i.src=a,k(e.viewBox,i),e.image2=i,t){var r=t.querySelector?[t]:document.querySelectorAll(t);e.previews=r,h(r,function(e){var t=M("img");y(e,"preview",{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),n&&(t.crossOrigin=n),t.src=a,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',P(e),k(e,t)})}},resetPreview:function(){h(this.previews,function(e){var t=v(e,"preview");d(e,{width:t.width,height:t.height}),e.innerHTML=t.html,w(e,"preview")})},preview:function(){var e=this,t=e.imageData,i=e.canvasData,n=e.cropBoxData,a=n.width,r=n.height,o=t.width,s=t.height,c=n.left-i.left-t.left,u=n.top-i.top-t.top;e.cropped&&!e.disabled&&(d(e.image2,l({width:o,height:s},O(l({translateX:-c,translateY:-u},t)))),h(e.previews,function(e){var i=v(e,"preview"),n=i.width,h=i.height,p=n,g=h,f=1;a&&(f=n/a,g=r*f),r&&g>h&&(f=h/r,p=a*f,g=h),d(e,{width:p,height:g}),d(T(e,"img")[0],l({width:o*f,height:s*f},O(l({translateX:-c*f,translateY:-u*f},t))))}))}},ce="undefined"!=typeof window?window.PointerEvent:null,de=ce?"pointerdown":"touchstart mousedown",ue=ce?"pointermove":"touchmove mousemove",pe=ce?" pointerup pointercancel":"touchend touchcancel mouseup",ge={bind:function(){var e=this,t=e.options,i=e.element,n=e.cropper;r(t.cropstart)&&x(i,"cropstart",t.cropstart),r(t.cropmove)&&x(i,"cropmove",t.cropmove),r(t.cropend)&&x(i,"cropend",t.cropend),r(t.crop)&&x(i,"crop",t.crop),r(t.zoom)&&x(i,"zoom",t.zoom),x(n,de,e.onCropStart=c(e.cropStart,e)),t.zoomable&&t.zoomOnWheel&&x(n,"wheel mousewheel DOMMouseScroll",e.onWheel=c(e.wheel,e)),t.toggleDragModeOnDblclick&&x(n,"dblclick",e.onDblclick=c(e.dblclick,e)),x(document,ue,e.onCropMove=c(e.cropMove,e)),x(document,pe,e.onCropEnd=c(e.cropEnd,e)),t.responsive&&x(window,"resize",e.onResize=c(e.resize,e))},unbind:function(){var e=this,t=e.options,i=e.element,n=e.cropper;r(t.cropstart)&&b(i,"cropstart",t.cropstart),r(t.cropmove)&&b(i,"cropmove",t.cropmove),r(t.cropend)&&b(i,"cropend",t.cropend),r(t.crop)&&b(i,"crop",t.crop),r(t.zoom)&&b(i,"zoom",t.zoom),b(n,de,e.onCropStart),t.zoomable&&t.zoomOnWheel&&b(n,"wheel mousewheel DOMMouseScroll",e.onWheel),t.toggleDragModeOnDblclick&&b(n,"dblclick",e.onDblclick),b(document,ue,e.onCropMove),b(document,pe,e.onCropEnd),t.responsive&&b(window,"resize",e.onResize)}},fe=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,me={resize:function(){var e=this,t=e.options,i=e.container,n=e.containerData,a=Number(t.minContainerWidth)||200,r=Number(t.minContainerHeight)||100;if(!e.disabled&&n.width!==a&&n.height!==r){var o=i.offsetWidth/n.width;1===o&&i.offsetHeight===n.height||function(){var i=void 0,n=void 0;t.restore&&(i=e.getCanvasData(),n=e.getCropBoxData()),e.render(),t.restore&&(e.setCanvasData(h(i,function(e,t){i[t]=e*o})),e.setCropBoxData(h(n,function(e,t){n[t]=e*o})))}()}},dblclick:function(){var e=this;e.disabled||"none"===e.options.dragMode||e.setDragMode(u(e.dragBox,"cropper-crop")?"move":"crop")},wheel:function(e){var t=this,i=S(e),n=Number(t.options.wheelZoomRatio)||.1,a=1;t.disabled||(i.preventDefault(),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),i.deltaY?a=i.deltaY>0?1:-1:i.wheelDelta?a=-i.wheelDelta/120:i.detail&&(a=i.detail>0?1:-1),t.zoom(-a*n,i)))},cropStart:function(e){var t=this;if(!t.disabled){var i=t.options,n=t.pointers,a=S(e),r=void 0;a.changedTouches?h(a.changedTouches,function(e){n[e.identifier]=G(e)}):n[a.pointerId||0]=G(a),r=Object.keys(n).length>1&&i.zoomable&&i.zoomOnTouch?"zoom":v(a.target,"action"),fe.test(r)&&!1!==C(t.element,"cropstart",{originalEvent:a,action:r})&&(a.preventDefault(),t.action=r,t.cropping=!1,"crop"===r&&(t.cropping=!0,p(t.dragBox,"cropper-modal")))}},cropMove:function(e){var t=this,i=t.action;if(!t.disabled&&i){var n=t.pointers,a=S(e);a.preventDefault(),!1!==C(t.element,"cropmove",{originalEvent:a,action:i})&&(a.changedTouches?h(a.changedTouches,function(e){l(n[e.identifier],G(e,!0))}):l(n[a.pointerId||0],G(a,!0)),t.change(a))}},cropEnd:function(e){var t=this;if(!t.disabled){var i=t.action,n=t.pointers,a=S(e);a.changedTouches?h(a.changedTouches,function(e){delete n[e.identifier]}):delete n[a.pointerId||0],i&&(a.preventDefault(),Object.keys(n).length||(t.action=""),t.cropping&&(t.cropping=!1,f(t.dragBox,"cropper-modal",t.cropped&&this.options.modal)),C(t.element,"cropend",{originalEvent:a,action:i}))}}},ve={change:function(e){var t=this,i=t.options,n=t.containerData,a=t.canvasData,r=t.cropBoxData,o=i.aspectRatio,s=t.action,l=r.width,c=r.height,d=r.left,u=r.top,p=d+l,f=u+c,m=0,v=0,y=n.width,w=n.height,b=!0,x=void 0;!o&&e.shiftKey&&(o=l&&c?l/c:1),t.limited&&(m=r.minLeft,v=r.minTop,y=m+Math.min(n.width,a.width,a.left+a.width),w=v+Math.min(n.height,a.height,a.top+a.height));var C=t.pointers,S=C[Object.keys(C)[0]],T={x:S.endX-S.startX,y:S.endY-S.startY};switch(o&&(T.X=T.y*o,T.Y=T.x/o),s){case"all":d+=T.x,u+=T.y;break;case"e":if(T.x>=0&&(p>=y||o&&(u<=v||f>=w))){b=!1;break}l+=T.x,o&&(c=l/o,u-=T.Y/2),l<0&&(s="w",l=0);break;case"n":if(T.y<=0&&(u<=v||o&&(d<=m||p>=y))){b=!1;break}c-=T.y,u+=T.y,o&&(l=c*o,d+=T.X/2),c<0&&(s="s",c=0);break;case"w":if(T.x<=0&&(d<=m||o&&(u<=v||f>=w))){b=!1;break}l-=T.x,d+=T.x,o&&(c=l/o,u+=T.Y/2),l<0&&(s="e",l=0);break;case"s":if(T.y>=0&&(f>=w||o&&(d<=m||p>=y))){b=!1;break}c+=T.y,o&&(l=c*o,d-=T.X/2),c<0&&(s="n",c=0);break;case"ne":if(o){if(T.y<=0&&(u<=v||p>=y)){b=!1;break}c-=T.y,u+=T.y,l=c*o}else T.x>=0?p<y?l+=T.x:T.y<=0&&u<=v&&(b=!1):l+=T.x,T.y<=0?u>v&&(c-=T.y,u+=T.y):(c-=T.y,u+=T.y);l<0&&c<0?(s="sw",c=0,l=0):l<0?(s="nw",l=0):c<0&&(s="se",c=0);break;case"nw":if(o){if(T.y<=0&&(u<=v||d<=m)){b=!1;break}c-=T.y,u+=T.y,l=c*o,d+=T.X}else T.x<=0?d>m?(l-=T.x,d+=T.x):T.y<=0&&u<=v&&(b=!1):(l-=T.x,d+=T.x),T.y<=0?u>v&&(c-=T.y,u+=T.y):(c-=T.y,u+=T.y);l<0&&c<0?(s="se",c=0,l=0):l<0?(s="ne",l=0):c<0&&(s="sw",c=0);break;case"sw":if(o){if(T.x<=0&&(d<=m||f>=w)){b=!1;break}l-=T.x,d+=T.x,c=l/o}else T.x<=0?d>m?(l-=T.x,d+=T.x):T.y>=0&&f>=w&&(b=!1):(l-=T.x,d+=T.x),T.y>=0?f<w&&(c+=T.y):c+=T.y;l<0&&c<0?(s="ne",c=0,l=0):l<0?(s="se",l=0):c<0&&(s="nw",c=0);break;case"se":if(o){if(T.x>=0&&(p>=y||f>=w)){b=!1;break}l+=T.x,c=l/o}else T.x>=0?p<y?l+=T.x:T.y>=0&&f>=w&&(b=!1):l+=T.x,T.y>=0?f<w&&(c+=T.y):c+=T.y;l<0&&c<0?(s="nw",c=0,l=0):l<0?(s="sw",l=0):c<0&&(s="ne",c=0);break;case"move":t.move(T.x,T.y),b=!1;break;case"zoom":t.zoom(U(C),e),b=!1;break;case"crop":if(!T.x||!T.y){b=!1;break}x=I(t.cropper),d=S.startX-x.left,u=S.startY-x.top,l=r.minWidth,c=r.minHeight,T.x>0?s=T.y>0?"se":"ne":T.x<0&&(d-=l,s=T.y>0?"sw":"nw"),T.y<0&&(u-=c),t.cropped||(g(t.cropBox,"cropper-hidden"),t.cropped=!0,t.limited&&t.limitCropBox(!0,!0))}b&&(r.width=l,r.height=c,r.left=d,r.top=u,t.action=s,t.renderCropBox()),h(C,function(e){e.startX=e.endX,e.startY=e.endY})}},ye={crop:function(){var e=this;return e.ready&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&p(e.dragBox,"cropper-modal"),g(e.cropBox,"cropper-hidden")),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.ready&&!e.disabled&&(e.imageData=l({},e.initialImageData),e.canvasData=l({},e.initialCanvasData),e.cropBoxData=l({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(l(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),g(e.dragBox,"cropper-modal"),p(e.cropBox,"cropper-hidden")),e},replace:function(e,t){var i=this;return!i.disabled&&e&&(i.isImg&&(i.element.src=e),t?(i.url=e,i.image.src=e,i.ready&&(i.image2.src=e,h(i.previews,function(t){T(t,"img")[0].src=e}))):(i.isImg&&(i.replaced=!0),i.options.data=null,i.load(e))),i},enable:function(){var e=this;return e.ready&&(e.disabled=!1,g(e.cropper,"cropper-disabled")),e},disable:function(){var e=this;return e.ready&&(e.disabled=!0,p(e.cropper,"cropper-disabled")),e},destroy:function(){var e=this,t=e.element,i=e.image;return e.loaded?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),g(t,"cropper-hidden")):e.isImg?b(t,"load",e.onStart):i&&E(i),w(t,"cropper"),e},move:function(e,t){var n=this,a=n.canvasData;return n.moveTo(i(e)?e:a.left+Number(e),i(t)?t:a.top+Number(t))},moveTo:function(e,n){var a=this,r=a.canvasData,o=!1;return i(n)&&(n=e),e=Number(e),n=Number(n),a.ready&&!a.disabled&&a.options.movable&&(t(e)&&(r.left=e,o=!0),t(n)&&(r.top=n,o=!0),o&&a.renderCanvas(!0)),a},zoom:function(e,t){var i=this,n=i.canvasData;return e=Number(e),e=e<0?1/(1-e):1+e,i.zoomTo(n.width*e/n.naturalWidth,t)},zoomTo:function(e,t){var i=this,n=i.options,a=i.canvasData,r=a.width,o=a.height,s=a.naturalWidth,h=a.naturalHeight;if((e=Number(e))>=0&&i.ready&&!i.disabled&&n.zoomable){var l=s*e,c=h*e;if(!1===C(i.element,"zoom",{originalEvent:t,oldRatio:r/s,ratio:l/s}))return i;if(t){var d=i.pointers,u=I(i.cropper),p=d&&Object.keys(d).length?Y(d):{pageX:t.pageX,pageY:t.pageY};a.left-=(l-r)*((p.pageX-u.left-a.left)/r),a.top-=(c-o)*((p.pageY-u.top-a.top)/o)}else a.left-=(l-r)/2,a.top-=(c-o)/2;a.width=l,a.height=c,i.renderCanvas(!0)}return i},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+Number(e))},rotateTo:function(e){var i=this;return e=Number(e),t(e)&&i.ready&&!i.disabled&&i.options.rotatable&&(i.imageData.rotate=e%360,i.rotated=!0,i.renderCanvas(!0)),i},scale:function(e,n){var a=this,r=a.imageData,o=!1;return i(n)&&(n=e),e=Number(e),n=Number(n),a.ready&&!a.disabled&&a.options.scalable&&(t(e)&&(r.scaleX=e,o=!0),t(n)&&(r.scaleY=n,o=!0),o&&a.renderImage(!0)),a},scaleX:function(e){var i=this,n=i.imageData.scaleY;return i.scale(e,t(n)?n:1)},scaleY:function(e){var i=this,n=i.imageData.scaleX;return i.scale(t(n)?n:1,e)},getData:function(e){var t=this,i=t.options,n=t.imageData,a=t.canvasData,r=t.cropBoxData,o=void 0,s=void 0;return t.ready&&t.cropped?(s={x:r.left-a.left,y:r.top-a.top,width:r.width,height:r.height},o=n.width/n.naturalWidth,h(s,function(t,i){t/=o,s[i]=e?Math.round(t):t})):s={x:0,y:0,width:0,height:0},i.rotatable&&(s.rotate=n.rotate||0),i.scalable&&(s.scaleX=n.scaleX||1,s.scaleY=n.scaleY||1),s},setData:function(e){var i=this,n=i.options,o=i.imageData,s=i.canvasData,h={},l=void 0,c=void 0,d=void 0;return r(e)&&(e=e.call(i.element)),i.ready&&!i.disabled&&a(e)&&(n.rotatable&&t(e.rotate)&&e.rotate!==o.rotate&&(o.rotate=e.rotate,i.rotated=l=!0),n.scalable&&(t(e.scaleX)&&e.scaleX!==o.scaleX&&(o.scaleX=e.scaleX,c=!0),t(e.scaleY)&&e.scaleY!==o.scaleY&&(o.scaleY=e.scaleY,c=!0)),l?i.renderCanvas():c&&i.renderImage(),d=o.width/o.naturalWidth,t(e.x)&&(h.left=e.x*d+s.left),t(e.y)&&(h.top=e.y*d+s.top),t(e.width)&&(h.width=e.width*d),t(e.height)&&(h.height=e.height*d),i.setCropBoxData(h)),i},getContainerData:function(){var e=this;return e.ready?e.containerData:{}},getImageData:function(){var e=this;return e.loaded?e.imageData:{}},getCanvasData:function(){var e=this,t=e.canvasData,i={};return e.ready&&h(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(e){var i=this,n=i.canvasData,o=n.aspectRatio;return r(e)&&(e=e.call(i.element)),i.ready&&!i.disabled&&a(e)&&(t(e.left)&&(n.left=e.left),t(e.top)&&(n.top=e.top),t(e.width)?(n.width=e.width,n.height=e.width/o):t(e.height)&&(n.height=e.height,n.width=e.height*o),i.renderCanvas(!0)),i},getCropBoxData:function(){var e=this,t=e.cropBoxData,i=void 0;return e.ready&&e.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(e){var i=this,n=i.cropBoxData,o=i.options.aspectRatio,s=void 0,h=void 0;return r(e)&&(e=e.call(i.element)),i.ready&&i.cropped&&!i.disabled&&a(e)&&(t(e.left)&&(n.left=e.left),t(e.top)&&(n.top=e.top),t(e.width)&&e.width!==n.width&&(s=!0,n.width=e.width),t(e.height)&&e.height!==n.height&&(h=!0,n.height=e.height),o&&(s?n.height=n.width/o:h&&(n.width=n.height*o)),i.renderCropBox()),i},getCroppedCanvas:function(e){var t=this;if(!t.ready||!window.HTMLCanvasElement)return null;if(!t.cropped)return A(t.image,t.imageData);a(e)||(e={});var i=t.getData(),n=i.width,r=i.height,o=n/r,s=void 0,h=void 0,l=void 0;a(e)&&(s=e.width,h=e.height,s?(h=s/o,l=s/n):h&&(s=h*o,l=h/r));var c=Math.floor(s||n),d=Math.floor(h||r),u=M("canvas"),p=u.getContext("2d");u.width=c,u.height=d,e.fillColor&&(p.fillStyle=e.fillColor,p.fillRect(0,0,c,d));var g=function(){var e=A(t.image,t.imageData),a=e.width,o=e.height,s=t.canvasData,h=[e],c=i.x+s.naturalWidth*(Math.abs(i.scaleX||1)-1)/2,d=i.y+s.naturalHeight*(Math.abs(i.scaleY||1)-1)/2,u=void 0,p=void 0,g=void 0,f=void 0,m=void 0,v=void 0;return c<=-n||c>a?c=u=g=m=0:c<=0?(g=-c,c=0,u=m=Math.min(a,n+c)):c<=a&&(g=0,u=m=Math.min(n,a-c)),u<=0||d<=-r||d>o?d=p=f=v=0:d<=0?(f=-d,d=0,p=v=Math.min(o,r+d)):d<=o&&(f=0,p=v=Math.min(r,o-d)),h.push(Math.floor(c),Math.floor(d),Math.floor(u),Math.floor(p)),l&&(g*=l,f*=l,m*=l,v*=l),m>0&&v>0&&h.push(Math.floor(g),Math.floor(f),Math.floor(m),Math.floor(v)),h}();return p.drawImage.apply(p,_(g)),u},setAspectRatio:function(e){var t=this,n=t.options;return t.disabled||i(e)||(n.aspectRatio=Math.max(0,e)||NaN,t.ready&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t=this,i=t.options,n=t.dragBox,a=t.face,r=void 0,o=void 0;return t.loaded&&!t.disabled&&(r="crop"===e,o=i.movable&&"move"===e,e=r||o?e:"none",y(n,"action",e),f(n,"cropper-crop",r),f(n,"cropper-move",o),i.cropBoxMovable||(y(a,"action",e),f(a,"cropper-crop",r),f(a,"cropper-move",o))),t}},we=/^data:/,be=void 0,xe=function(){function e(t,i){V(this,e);var n=this;n.element=t,n.options=l({},X,a(i)&&i),n.loaded=!1,n.ready=!1,n.complete=!1,n.rotated=!1,n.cropped=!1,n.disabled=!1,n.replaced=!1,n.limited=!1,n.wheeling=!1,n.isImg=!1,n.originalUrl="",n.canvasData=null,n.cropBoxData=null,n.previews=null,n.pointers={},n.init()}return q(e,[{key:"init",value:function(){var e=this,t=e.element,i=t.tagName.toLowerCase(),n=void 0;if(!v(t,"cropper")){if(y(t,"cropper",e),"img"===i){if(e.isImg=!0,e.originalUrl=n=t.getAttribute("src"),!n)return;n=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(n=t.toDataURL());e.load(n)}}},{key:"load",value:function(e){var t=this,i=t.options,n=t.element;if(e){if(t.url=e,t.imageData={},!i.checkOrientation||!window.ArrayBuffer)return void t.clone();if(we.test(e))return void t.read(z(e));var a=new XMLHttpRequest;a.onerror=a.onabort=function(){t.clone()},a.onload=function(){t.read(a.response)},i.checkCrossOrigin&&B(e)&&n.crossOrigin&&(e=L(e)),a.open("get",e),a.responseType="arraybuffer",a.withCredentials="use-credentials"===n.crossOrigin,a.send()}}},{key:"read",value:function(e){var t=this,i=t.options,n=N(e),a=t.imageData,r=0,o=1,s=1;if(n>1)switch(t.url=H(e),n){case 2:o=-1;break;case 3:r=-180;break;case 4:s=-1;break;case 5:r=90,s=-1;break;case 6:r=90;break;case 7:r=90,o=-1;break;case 8:r=-90}i.rotatable&&(a.rotate=r),i.scalable&&(a.scaleX=o,a.scaleY=s),t.clone()}},{key:"clone",value:function(){var e=this,t=e.element,i=e.url,n=void 0,a=void 0,r=void 0,o=void 0;e.options.checkCrossOrigin&&B(i)&&(n=t.crossOrigin,n?a=i:(n="anonymous",a=L(i))),e.crossOrigin=n,e.crossOriginUrl=a;var s=M("img");n&&(s.crossOrigin=n),s.src=a||i,e.image=s,e.onStart=r=c(e.start,e),e.onStop=o=c(e.stop,e),e.isImg?t.complete?e.start():x(t,"load",r):(x(s,"load",r),x(s,"error",o),p(s,"cropper-hide"),t.parentNode.insertBefore(s,t.nextSibling))}},{key:"start",value:function(e){var t=this,i=t.isImg?t.element:t.image;e&&(b(i,"load",t.onStart),b(i,"error",t.onStop)),R(i,function(e,i){l(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.loaded=!0,t.build()})}},{key:"stop",value:function(){var e=this,t=e.image;b(t,"load",e.onStart),b(t,"error",e.onStop),E(t),e.image=null}},{key:"build",value:function(){var e=this,t=e.options,i=e.element,n=e.image,a=void 0,o=void 0,s=void 0,h=void 0,l=void 0,c=void 0;if(e.loaded){e.ready&&e.unbuild();var d=M("div");d.innerHTML='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',e.container=a=i.parentNode,e.cropper=o=D(d,"cropper-container")[0],e.canvas=s=D(o,"cropper-canvas")[0],e.dragBox=h=D(o,"cropper-drag-box")[0],e.cropBox=l=D(o,"cropper-crop-box")[0],e.viewBox=D(o,"cropper-view-box")[0],e.face=c=D(l,"cropper-face")[0],k(s,n),p(i,"cropper-hidden"),a.insertBefore(o,i.nextSibling),e.isImg||g(n,"cropper-hide"),e.initPreview(),e.bind(),t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,e.cropped=t.autoCrop,t.autoCrop?t.modal&&p(h,"cropper-modal"):p(l,"cropper-hidden"),t.guides||p(D(l,"cropper-dashed"),"cropper-hidden"),t.center||p(D(l,"cropper-center"),"cropper-hidden"),t.background&&p(o,"cropper-bg"),t.highlight||p(c,"cropper-invisible"),t.cropBoxMovable&&(p(c,"cropper-move"),y(c,"action","all")),t.cropBoxResizable||(p(D(l,"cropper-line"),"cropper-hidden"),p(D(l,"cropper-point"),"cropper-hidden")),e.setDragMode(t.dragMode),e.render(),e.ready=!0,e.setData(t.data),e.completing=setTimeout(function(){r(t.ready)&&x(i,"ready",t.ready,!0),C(i,"ready"),C(i,"crop",e.getData()),e.complete=!0},0)}}},{key:"unbuild",value:function(){var e=this;e.ready&&(e.complete||clearTimeout(e.completing),e.ready=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,E(e.cropper),e.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=be,e}},{key:"setDefaults",value:function(e){l(X,a(e)&&e)}}]),e}();return l(xe.prototype,he),l(xe.prototype,le),l(xe.prototype,ge),l(xe.prototype,me),l(xe.prototype,ve),l(xe.prototype,ye),"undefined"!=typeof window&&(be=window.Cropper,window.Cropper=xe),xe})},function(e,t,i){e.exports=i(0)}]);